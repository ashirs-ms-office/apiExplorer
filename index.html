<!DOCTYPE html>
<html>

<head>
    <title>Microsoft Graph Explorer</title>
</head>

<body ng-app="ApiExplorer" ng-controller="ApiExplorerCtrl" role="document">
    <nav class="navbar navbar-fixed-top navbar-dark bg-inverse">
        <div class="container">
            <button class="navbar-toggler hidden-sm-up" type="button" data-toggle="collapse" data-target="#exCollapsingNavbar2">
                &#9776;
            </button>
            <div class="collapse navbar-toggleable-xs" id="exCollapsingNavbar2">
                <a class="navbar-brand" href="#">Microsoft Graph Explorer</a>
                <ul class="nav navbar-nav pull-right">
                    <li class="nav-item">
                        <a class="nav-link" href="https://msdn.microsoft.com/en-us/Library/Azure/Ad/Graph/api/api-catalog">Documentation</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" ng-show="userInfo.isAuthenticated">{{userInfo.userName}}</a>
                    </li>
                    <li class="nav-item"><a class="nav-link" href="#" ng-show="userInfo.isAuthenticated" ng-click="logout()">Logout</a></li>
                    <li class="nav-item"><a class="nav-link" href="#" ng-hide="userInfo.isAuthenticated" ng-click="login()">Login</a></li>
                </ul>
            </div>
        </div>
    </nav>
    <br />
    <div class="container body-content" ng-controller="FormCtrl">
        <div class="autocomplete" ng-controller="datalistCtrl">
        <form class="main-query" ng-submit="submit(item, searchText)">
                    <md-autocomplete flex
                                     md-selected-item="selectedItem" 
                                     md-no-cache="true"
                                     md-search-text="searchText" 
                                     md-search-text-change="searchTextChange(searchText)"
                                     md-items="item in getMatches(searchText)" 
                                     md-item-text="text + item.name" 
                                     md-floating-label="Enter a request"
                                     md-min-length="0" 
                                     md-selected-item-change="$parent.submit(item, searchText)"
                                     placeholder="{{text}}">
                    <md-item-template> 
                        <span md-highlight-text="searchText">{{text + item.name}}</span>

                    </md-item-template>
                </md-autocomplete>
         </form>
        </div>
        <div layout="row" layout-align="space-around">
              <md-input-container flex=75>
                    <!-- FIX THIS TO BE ORDERED CORRECTLY --> 
                    <md-select id="back-button" ng-model="historySelected" placeholder="history" ng-disabled="history.length==0">
                       <!--<md-option ng-value="call" ng-repeat="call in history | orderby:'id':true track by $index">-->
                        <md-option ng-value="{{call}}" ng-repeat="call in history" ng-class="call.success" ng-click="historyOnClick(call)" >
                            {{ call.urlText }} 
                        </md-option> 
                    </md-select>
               </md-input-container>
                <md-input-container ng-controller="settingsCtrl">
                    <md-button class="md-raised" ng-click="showDialog($event)"> Settings </md-button>
                </md-input-container>
               <md-input-container>
                    <md-button class="md-raised" type="submit" ng-click="submit(item, searchText)" ng-disabled="!userInfo.isAuthenticated"> Go </md-button>
               </md-input-container>
         </div>
               
            <!-- MAKE THIS A TOAST -->
                
     <!--       </div>-->
<!--            <div class="input-group-btn" id="duration" ng-show="showDuration">
                <div class="btn-group" uib-dropdown on-toggle="toggled(open)">
                    <button id="timeButton" type="button" class="btn btn-default" ng-model="duration" name="duration">
                        {{duration}}
                    </button>
                </div>
            </div>-->

        <img id="img" width="250px" height="250px" ng-show="showImage" />
        <div id="jsonEditor" ng-show="showJsonEditor"></div>
        <div id="jsonViewer" ng-show="showJsonViewer"></div>
        <br/>
        <uib-accordion>
            <uib-accordion-group heading="Response Headers" is-open="status.isFirstOpen" is-disabled="status.isFirstDisabled">
                <pre id="responseHeaderDetails">{{responseHeaders}}</pre>
            </uib-accordion-group>
        </uib-accordion>

    </div>

    <!--    scripts are loaded here-->
    <link rel="stylesheet" href="./bower_components/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/angular_material/1.1.0-rc2/angular-material.min.css">
    <link rel="stylesheet" href="./src/api-explorer.css">
    <link rel="stylesheet" href="./bower_components/ngprogress/ngProgress.css">
    <link rel="shortcut icon" type="image/png" href="jasmine/lib/jasmine-2.0.0/jasmine_favicon.png">
    <link rel="stylesheet" type="text/css" href="jasmine/lib/jasmine-2.0.0/jasmine.css">

    <!-- Jasmine -->
    <script type="text/javascript" src="jasmine/lib/jasmine-2.0.0/jasmine.js"></script>
    <script type="text/javascript" src="jasmine/lib/jasmine-2.0.0/jasmine-html.js"></script>
    <script type="text/javascript" src="jasmine/lib/jasmine-2.0.0/boot.js"></script>
    <!-- Ace not available currently on bower -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.0/ace.js"></script>
    <script src="./src/api-explorer-helpers.js"></script>
    <script src="./src/api-explorer-jsviewer.js"></script>
    <script src="./src/api-explorer-jseditor.js"></script>
    <script src="./src/constants.js"></script>
    <script src="./bower_components/angular/angular.min.js"></script>
    <script src="./bower_components/angular-route/angular-route.min.js"></script>
    <script src="./bower_components/angular-animate/angular-animate.min.js"></script>
    <script src="./bower_components/angular-bootstrap/ui-bootstrap-tpls.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.5.3/angular-aria.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.5.3/angular-messages.min.js"></script>
    <scipt src="./lib/angular-mocks.js"></scipt>

     <!-- Angular Material Library -->
    <script src="http://ajax.googleapis.com/ajax/libs/angular_material/1.1.0-rc2/angular-material.min.js"></script>
    <script src="https://secure.aadcdn.microsoftonline-p.com/lib/1.0.0/js/adal.min.js"></script>
    <script src="https://secure.aadcdn.microsoftonline-p.com/lib/1.0.0/js/adal-angular.min.js"></script>

    <script src="./bower_components/ngprogress/build/ngprogress.min.js"></script>
    <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.12.2.min.js"></script>

    <script src="./src/api-explorer-init.js"></script>
    <script src="./src/api-explorer-app.js"></script>
    <script src="./src/api-explorer-svc.js"></script>
    <script src="./src/api-explorer-msgraph.js"></script>
    <script src="./src/api-explorer-ctrl.js"></script>
    <script src="./spec/api-explorer-ctrl-spec.js"></script>
</body>

</html>